ARG BASE_IMAGE=mongo:8.0
FROM ${BASE_IMAGE}

# Set data environment variables from build/run args
ARG DATA_NONREL_DB
ARG DATA_NONREL_USER
ARG DATA_NONREL_PASSWORD
ARG DATA_NONREL_PORT_HOST
ARG DATA_NONREL_PORT_CONTAINER

ENV MONGO_INITDB_DATABASE=${DATA_NONREL_DB}
ENV MONGO_INITDB_ROOT_USERNAME=${DATA_NONREL_USER}
ENV MONGO_INITDB_ROOT_PASSWORD=${DATA_NONREL_PASSWORD}
ENV DATA_NONREL_PORT_HOST=${DATA_NONREL_PORT_HOST}
ENV DATA_NONREL_PORT_CONTAINER=${DATA_NONREL_PORT_CONTAINER}

# Install unzip for data import
RUN apt-get update && apt-get install -y unzip && rm -rf /var/lib/apt/lists/*

# Expose MongoDB ports
EXPOSE 27017 ${DATA_NONREL_PORT_HOST} ${DATA_NONREL_PORT_CONTAINER}
