ARG BASE_IMAGE=mysql:9.1-bookworm
FROM ${BASE_IMAGE}

# Set data environment variables from build/run args
ARG DATA_REL_DB
ARG DATA_REL_USER
ARG DATA_REL_PASSWORD
ARG DATA_REL_PORT_HOST
ARG DATA_REL_PORT_CONTAINER

ENV MYSQL_DATABASE=${DATA_REL_DB}
ENV MYSQL_USER=${DATA_REL_USER}
ENV MYSQL_PASSWORD=${DATA_REL_PASSWORD}
ENV MYSQL_ROOT_PASSWORD=${DATA_REL_PASSWORD}
ENV DATA_REL_PORT_HOST=${DATA_REL_PORT_HOST}
ENV DATA_REL_PORT_CONTAINER=${DATA_REL_PORT_CONTAINER}

# Install unzip for data import
RUN apt-get update && apt-get install -y unzip && rm -rf /var/lib/apt/lists/*

# Expose MySQL ports
EXPOSE 3306 ${DATA_REL_PORT_HOST} ${DATA_REL_PORT_CONTAINER}
